<template>
    <!-- Filter Buttons -->
    <!-- <div class="slds-m-around_medium">
        <lightning-button 
            label="Show Red Tasks" 
            variant="destructive" 
            onclick={handleFilterClick}
            data-rag="ðŸ”´ Red"
            class="slds-m-right_small">
        </lightning-button>

        <lightning-button 
            label="Show Orange Tasks" 
            variant="brand-outline" 
            onclick={handleFilterClick}
            data-rag="ðŸŸ  Orange">
        </lightning-button>
    </div> -->

    <!-- Modal Section -->
    <template if:true={showModal}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large">
            <div class="slds-modal__container custom-modal-width">
                <header class="slds-modal__header">
                    <h2 class="slds-modal__title">{modalTitle}</h2>
                </header>

                <div class="slds-modal__content slds-p-around_medium">
                    <!-- Total Count -->
                    <template if:true={tasks.length}>
                        <div class="slds-text-heading_small slds-m-bottom_small">
                            Total Tasks: {tasks.length}
                        </div>
                    </template>

                    <!-- Table -->
                    <template if:true={tasks.length}>
                        <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                            <thead>
                                <tr>
                                    <th>Sr. No.</th>
                                    <th>Developer</th>
                                    <th>Project</th>
                                    <th>Task No</th>
                                    <th>Current Status</th>
                                    <th>RAG</th>
                                </tr>
                            </thead>
                            <tbody>
                                <template for:each={tasksWithIndex} for:item="task">
                                    <tr key={task.Id}>
                                        <td>{task.srNo}</td>
                                        <td>{task.Developer_Name__c}</td>
                                        <td>{task.projectsName}</td>
                                        <td>
                                            <a
                                                href="javascript:void(0);"
                                                data-task-id={task.Id}
                                                onclick={handleTaskClick}
                                                style="color: #0070d2; text-decoration: underline;"
                                            >
                                                {task.Name}
                                            </a>
                                        </td>
                                        <td>{task.Current_Task_Status__c}</td>
                                        <td>{task.RAG__c}</td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </template>

                    <template if:false={tasks.length}>
                        <p>No tasks found for selected RAG.</p>
                    </template>
                </div>

                <footer class="slds-modal__footer">
                    <lightning-button 
                        label="Close" 
                        onclick={closeModal} 
                        class="slds-button_neutral">
                    </lightning-button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>